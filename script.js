// const fetch = require("node-fetch");
console.log("Running")

function loginFun1(){
    getData();
}


async function loginFun(){
    console.log("Runninf")
    // const username = document.getElementById('username').value;
    // const password = document.getElementById('password').value;
    // console.log(username, password);
    const corsProxyUrl = 'https://cors-anywhere.herokuapp.com/';
    const targetUrl = 'https://qa2.sunbasedata.com/sunbase/portal/api/assignment_auth.jsp';

    await fetch(targetUrl, {
    method: 'POST',

    body: `{
        "login_id" : abc,
        "password" : def    
    }`,
    
    // body: `{
    //     "login_id" : ${username},
    //     "password" :${password}   
    // }`,
    })
    .then(response => response.text())
    .then(data2 => {
        let data = data2.trim();
        if(data === "Login Id or Password is invalid"){
            console.log(data);
        }
        else{
            let parsed_data = JSON.parse(data)
            console.log(parsed_data.access_token);
        }


    });

}
// loginFun();


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



async function createCustomer(){
    const token = 'dGVzdEBzdW5iYXNlZGF0YS5jb206VGVzdEAxMjM=';
    fetch("https://qa2.sunbasedata.com/sunbase/portal/api/assignment.jsp?cmd=create", {
        method : "POST",
        headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'text/plain',
        },
        body: `{
            "first_name": "Pratik",
            "last_name": "pp",
            "street": "Elvnu Street",
            "address": "H no 2 ",
            "city": "Delhi",
            "state": "Delhi",
            "email": "sam@gmail.com",
            "phone": "4949449"    
        }`,
        responseType: 'text',
    })
    .then(response => {
        // Log the entire response for debugging purposes
        // console.log('Response:', response);
        return response.text();
      })
    .then(data => {
        console.log((data));
    });

}

// createCustomer();

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

async function getData(){
    const token = 'dGVzdEBzdW5iYXNlZGF0YS5jb206VGVzdEAxMjM=';
    fetch("https://qa2.sunbasedata.com/sunbase/portal/api/assignment.jsp?cmd=get_customer_list", {
        method : "GET",
        headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json',
        },
        
    })
    .then(response => {
        // console.log('Response:', response);
        return response.json();
      })
    .then(data => {
        console.log((data));
    });

}

// getData()

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



async function deleteData(){
    const token = 'dGVzdEBzdW5iYXNlZGF0YS5jb206VGVzdEAxMjM=';
    fetch("https://qa2.sunbasedata.com/sunbase/portal/api/assignment.jsp?cmd=delete&uuid=test2add74c4dbfc4d1baa145a42c4d3061d", {
        method : "POST",
        headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json',
        },
        
    })
    .then(response => {
        // console.log('Response:', response);
        return response.text();
      })
    .then(data => {
        console.log((data.trim()));
    });

}
// deleteData();



/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////